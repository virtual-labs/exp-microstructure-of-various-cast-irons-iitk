<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <title>Simulator 1</title>

    <style>
        a {
            text-decoration: none;
        }
        .text {
            background-color: yellow;
            border-radius: 21px;
            font-size: 22px;
            margin-left: 50px;
            margin-right: 50px;
            padding: 5px;
        }

        .img-caption {
            margin-top: 5px;
            color: #722F37;
            display: flex;
            justify-content: center;
        }

        #whitecast,
        #greycast,
        #ductilecast,
        #malleablecast,
        #compactcast {
            border: none;
            padding: 18px;
            font-size: 23px;
        }


        .type-button {
            display: flex;
            justify-content: center;
            align-content: center;
            align-items: center;
        }

        .selected {
            background-color: #198754;
            color: white;

        }

        img {
            width: 439px;
            height: 300px;
            /* width: 100%;
            height: auto; */
            margin: 5px;
            padding: 10px;
        }

        .application-name {
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: 500;
        }

        .highlighted-img {
            -webkit-box-shadow: 2px -2px 43px 10px rgba(25, 135, 84, 0.8);
            -moz-box-shadow: 2px -2px 43px 10px rgba(25, 135, 84, 0.8);
            box-shadow: 2px -2px 43px 10px rgba(25, 135, 84, 0.8);
        }
    </style>

</head>

<body>
    <button type="button" class="btn btn-outline-info  mx-2 my-2"><a href="index.html"> Go to main page</a></button>
    <button type="button" class="btn btn-outline-info  m-3"><a href="index.html">Back </a></button>
    <button type="button" class="btn btn-outline-info  m-3"><a href="Simulator2.html">Next </a></button>
    <h2 class="d-flex justify-content-center align-items-center"> Simulator 1 </h2>
    <p class="d-flex justify-content-center align-items-center text">Match the cast irons with their respective
        microstructures and applications.</p>


    <div class="container ">
        <div class="row">
            <!-- Type 1 -->
            <div class="col-md-4 col-sm-12 type-button">
                <h3 class="img-caption"> Type of cast iron </h3>
            </div>
            <!-- Microstructure 1 -->
            <div class="col-md-4 col-sm-12">
                <h3 class="img-caption"> Microstructures </h3>

            </div>
            <!-- Application 1 -->
            <div class="col-md-4 col-sm-12">
                <h3 class="img-caption"> Applications </h3>
            </div>
        </div>
        <div class="row">
            <!-- Type 1 -->
            <div class="col-md-4 col-sm-12 type-button">
                <button type="button" class="btn btn-outline-success" id="whitecast">White cast iron</button>
            </div>
            <!-- Microstructure 1 -->
            <div class="col-md-4 col-sm-12">
                <img src="./images/greycastiron.jpg" alt="greycastiron" id="grey-m" />
            </div>
            <!-- Application 1 -->
            <div class="col-md-4 col-sm-12">
                <img src="./images/whitecastironapp.jpg" alt="whitecastironapplication " id="white-app" />
                <p class="application-name">Iron based grinding media for ball mill</p>
            </div>
        </div>

        <div class="row">
            <!-- Type 2 -->
            <div class="col-md-4 col-sm-12 type-button">
                <button type="button" class="btn btn-outline-success" id="greycast">Grey cast iron</button>
            </div>
            <!-- Microstructure 2 -->
            <div class="col-md-4 col-sm-12">
                <img src="./images/whitecastiron.jpg" alt="whitecastiron" id="white-m" />
            </div>
            <!-- Application 2 -->
            <div class="col-md-4 col-sm-12">
                <img src="./images/ductilecstironapp.jpg" alt="ductilecastironapplication" id="ductile-app" />
                <p class="application-name">Iron pipes used for water transport</p>
            </div>
        </div>

        <div class="row">
            <!-- Type 3 -->
            <div class="col-md-4 col-sm-12 type-button">
                <button type="button" class="btn btn-outline-success" id="ductilecast">Ductile cast iron</button>
            </div>
            <!-- Microstructure 3 -->
            <div class="col-md-4 col-sm-12">
                <img src="./images/ductilecstiron.jpg" alt="ductilecastiron" id="ductile-m" />
            </div>
            <!-- Application 3 -->
            <div class="col-md-4 col-sm-12">
                <img src="./images/greycastironapp.jpg" alt="greycastironapplication" id="grey-app" />
                <p class="application-name">Machinery Gears</p>
            </div>
        </div>

        <div class="row">
            <!-- Type 4 -->
            <div class="col-md-4 col-sm-12 type-button">
                <button type="button" class="btn btn-outline-success" id="malleablecast">Malleable cast iron</button>
            </div>
            <!-- Microstructure 4 -->
            <div class="col-md-4 col-sm-12">
                <img src="./images/malleablecastiron.jpg" alt="malleablecastiron" id="malleable-m" />
            </div>
            <!-- Application 4 -->
            <div class="col-md-4 col-sm-12">
                <img src="./images/compactcastironapp.jpg" alt="compactcastironapplication" id="compact-app" />
                <p class="application-name">Diesel engine block</p>
            </div>
        </div>

        <div class="row">
            <!-- Type 5 -->
            <div class="col-md-4 col-sm-12 type-button">
                <button type="button" class="btn btn-outline-success" id="compactcast">Compact cast iron</button>
            </div>
            <!-- Microstructure 5 -->
            <div class="col-md-4 col-sm-12">
                <img src="./images/compactcastiron.jpg" alt="compactcastiron" id="compact-m" />
            </div>
            <!-- Application 5 -->
            <div class="col-md-4 col-sm-12">
                <img src="./images/malleablecastironapp.jpg" alt="malleablecastironapplication" id="malleable-app" />
                <p class="application-name">Washers</p>
            </div>
        </div>

    </div>







    <!-- Modal for Quiz Completed -->
    <div class="modal fade" id="quizCompletedModal" tabindex="-1" aria-labelledby="correctMatchModalLabel"
        aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="correctMatchModalLabel">Correct Match</h5>
                    <!-- <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button> -->
                </div>
                <div class="modal-body">
                    Congratulations! Quiz Completed.
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="location.reload()"> Restart Quiz </button>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal for Correct Match -->
    <div class="modal fade" id="correctMatchModal" tabindex="-1" aria-labelledby="correctMatchModalLabel"
        aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="correctMatchModalLabel">Correct Match</h5>
                    <!-- <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button> -->
                </div>
                <div class="modal-body">
                    Congratulations! You have made the correct match.
                </div>
                <!-- <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="location.reload()"> ok </button>
                </div> -->
            </div>
        </div>
    </div>
    <!-- Modal for Error Match -->
    <div class="modal fade" id="errorMatchModal" tabindex="-1" aria-labelledby="errorMatchModalLabel"
        aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="errorMatchModalLabel">Error</h5>
                    <!-- <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button> -->
                </div>
                <div class="modal-body">
                    Please choose correct microstructure and application images.
                </div>
                <!-- <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="location.reload()"> ok </button>
                </div> -->
            </div>
        </div>
    </div>
    <!-- Modal for Missing type -->
    <div class="modal fade" id="errorTypeModal" tabindex="-1" aria-labelledby="errorMatchModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="errorMatchModalLabel">Error</h5>
                    <!-- <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button> -->
                </div>
                <div class="modal-body">
                    Please choose a type first, and then select the correct microstructure and application images.
                </div>
                <!-- <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="location.reload()"> ok </button>
                </div> -->
            </div>
        </div>
    </div>


    <script>
        // Define an object to store correct answers for each type of cast iron
        const correctAnswers = {
            'whitecast': { microstructure: 'white-m', application: 'white-app' },
            'greycast': { microstructure: 'grey-m', application: 'grey-app' },
            'ductilecast': { microstructure: 'ductile-m', application: 'ductile-app' },
            'malleablecast': { microstructure: 'malleable-m', application: 'malleable-app' },
            'compactcast': { microstructure: 'compact-m', application: 'compact-app' },
        };

        const typeOrder = ['whitecast', 'greycast', 'ductilecast', 'malleablecast', 'compactcast'];
        let currentTypeIndex = 0;
        let selectedType = null;
        let selectedMicrostructure = null;
        let selectedApplication = null;


        function resetImagesStyles() {
            const images = document.querySelectorAll('img.highlighted-img');
            images.forEach(image => {
                image.classList.remove('highlighted-img');
            });
        }

        function moveToNextType() {
            resetImagesStyles() // resete previous image style 
            currentTypeIndex++;
            if (currentTypeIndex < typeOrder.length) {
                const nextTypeButton = document.getElementById(typeOrder[currentTypeIndex]);
                nextTypeButton.click();
                nextTypeButton.classList.add('selected');
                console.log("next btn clicked selected =", nextTypeButton)
            } else {
                // Check if the current type is the last type
                if (currentTypeIndex === typeOrder.length) {
                    // All types completed, show a completion modal
                    $('#quizCompletedModal').modal('show');
                }
            }
        }

        // Automatically select the first type button and highlight it on page load
        window.addEventListener('load', () => {
            const firstTypeButton = document.getElementById(typeOrder[currentTypeIndex]);
            firstTypeButton.click();
            firstTypeButton.classList.add('selected');
        });

        // Add click event listeners to all the type buttons
        const typeButtons = document.querySelectorAll('.btn-outline-success');
        typeButtons.forEach(button => {
            button.addEventListener('click', () => {
                if (currentTypeIndex === typeOrder.indexOf(button.id)) {
                    selectedType = button.id;
                    typeButtons.forEach(b => b.classList.remove('selected'));
                    button.classList.add('selected');
                }
            });
        });

        // Add click event listeners to the microstructure and application images
        const images = document.querySelectorAll('img');
        images.forEach(image => {
            image.addEventListener('click', () => {
                if (selectedType) {
                    console.log("selected type=", selectedType)
                    if (!selectedMicrostructure) {
                        selectedMicrostructure = image.id;
                        console.log("selected mic img1=", selectedMicrostructure)
                        image.classList.add('highlighted-img');  // adding microstructure image style 
                    } else if (!selectedApplication) {
                        selectedApplication = image.id;
                        image.classList.add('highlighted-img');  // adding application image style 

                        if (
                            selectedMicrostructure === correctAnswers[selectedType].microstructure &&
                            selectedApplication === correctAnswers[selectedType].application
                        ) {
                            console.log("selected mic img2=", selectedMicrostructure)
                            console.log("selected mic app=", selectedApplication)
                            // Check if the current type is the last type
                            if (currentTypeIndex === typeOrder.length - 1) {
                                // All types completed, show a completion modal
                                $('#quizCompletedModal').modal('show');
                            } else {
                                // Show the "Correct Match" modal for non-last types
                                $('#correctMatchModal').modal('show');
                            }
                            moveToNextType();
                        } else {
                            $('#errorMatchModal').modal('show');
                            resetImagesStyles()
                            // User selected an incorrect match, do not move to the next type
                            // You don't need to set selectedType to null here
                        }

                        selectedMicrostructure = null;
                        selectedApplication = null;
                    }
                } else {
                    console.log("not selected type=", selectedType)
                    $('#errorTypeModal').modal('show');
                }
            });
        });
    </script>

</body>

</html>